{% extends 'profile/base_profile.html' %}
{% comment %}
# This file is part of OpenHatch.
# Copyright (C) 2010 Parker Phinney
# Copyright (C) 2009 Karen Rustad
# Copyright (C) 2009, 2010 OpenHatch, Inc.
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU Affero General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Affero General Public License for more details.
#
# You should have received a copy of the GNU Affero General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.
{% endcomment %}

{% load base_extras %}

{% block title %}
{{ person.get_full_name_or_username }}
{% endblock title %}

{% block body_class %}{{ block.super }} view_mode{% endblock body_class %}

{% block more_content %}
    {% if person.user == user or user|has_group:'ADMIN' %}
        <div id='portfolio' class='module project-display viewer'>
            <div class='module-head'>
                {% if user|has_group:'ADMIN' %}
                    <ul>
                        <li>
                            <a id="edit-user-projects" href="#">Edit</a>
                        </li>
                    </ul>
                {% endif %}
                <h3>Projects</h3>
            </div>
            <div class='module-body'>
                <div id="edit-user-projects-form" class='submodule-full split triple' style="display: none">
                    <form method='post'>
                        {{ projects_form }}
                        <input type='submit' value='submit'>
                    </form>
                </div>
                {% with person.get_published_portfolio_entries as portfolio_entries %}
                    {% if portfolio_entries %}
                        <ul>
                            {% for pf_entry in portfolio_entries %}
                                {% include 'profile/portfolio/portfolio_entry_element.html' %}
                            {% endfor %}
                        </ul>
                        {% if how_many_archived_pf_entries %}
                            <a id='show_more_projects' href='#'>
                                And {{ how_many_archived_pf_entries }} more&hellip;</a>
                            <noscript>
                                Enable JavaScript to see more stuff here.
                            </noscript>
                        {% endif %}
                    {% else %}
                        <small style='color: #777; float: left; width: 100%;'>Nothing listed yet.</small>
                    {% endif %}
                {% endwith %}
            </div>
        </div> <!-- /#portfolio -->
    {% endif %}
{% endblock %}

{% block js %}
    <script type='text/javascript'>
        $(ShowMoreProjects.init);
    </script>
{% endblock js %}
